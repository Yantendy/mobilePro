<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="viewport"
        content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0">
    <link rel="stylesheet" href="../../../css/ytd/checkin.css">
    <link rel="stylesheet" href="../../../css/reset.css">
    <link rel="stylesheet" href="../../../css/ytd/font/iconfont.css">
    <title>Document</title>
</head>

<body>
    <div class="app">
        <div class="header">
            <div class="left">
                < </div>
                    <div class="right">
                        在线选座
                    </div>
                    <div class="tag">

                    </div>
            </div>
            <div class="artical">
                <div class="title">
                    不在携程购买的机票，也可以在携程办理在线选座（仅限国内航班）
                </div>
                <ul class="form">
                    <li class="item">
                        <div class="left">
                            航空公司
                        </div>
                        <div class="right mantle one">
                            <span class="mantle-one">
                                请选择航空公司
                            </span>

                        </div>
                    </li>
                    <li class="item">
                        <div class="left">
                            姓名
                        </div>
                        <div class="right clear">
                            <input type="text" placeholder="请输入乘机人姓名">
                            <div class="btns">
                                选择乘机人
                            </div>
                        </div>
                    </li>
                    <li class="item">
                        <div class="left">
                            证件类型
                        </div>
                        <div class="right mantle two">
                            <span class="mantle-two">
                                请选择证件类型
                            </span>
                        </div>
                    </li>
                    <li class="item">
                        <div class="left">
                            证件号码
                        </div>
                        <div class="right clear">
                            <input type="text" placeholder="请选择证件号码">
                        </div>
                    </li>
                    <li class="item">
                        <div class="left">
                            手机号
                        </div>
                        <div class="right clear">
                            <input type="text" placeholder="请输入手机号，接收选座结果">
                        </div>
                    </li>
                </ul>
                <div class="agree">
                    <div class="top">
                        <p></p>
                        <span>同意并已阅读相关<span style="color:#0086f6;">危险品公告</span></span>
                    </div>
                    <div class="button">
                        在线选座
                    </div>
                </div>
            </div>
            <div class="bottom">
                <h2>
                    订机票，想在第一时间抢到好座位？
                </h2>
                <div class="foot">
                    <div class="left">
                        <img src="https://pic.c-ctrip.com/AssetCatalog/knr/checkin/vas_0.png" alt="">
                    </div>
                    <div class="right">
                        <h3>设置选座偏好</h3>
                        <p>
                            <span>省时省心</span>
                            <span>省时省心</span>
                        </p>
                        <div class="info">
                            <span>管理偏好</span>
                        </div>
                    </div>
                </div>
            </div>




        </div>
    </div>
    <div class="out" style="visibility: hidden;">
        <div class="posi">
        </div>
        <div class="fixed-one one">
            <div class="head">
                <div class="tags">
                    ×
                </div>
                <div class="title">选择航空公司</div>
            </div>


            <ul class="list">

            </ul>
        </div>
    </div>
    <div class="out" style="visibility: hidden;">
        <div class="posi">
        </div>
        <div class="fixed-two">
            <div class="head">
                <div class="tags">
                    ×
                </div>
                <div class="title">选择航空公司</div>
            </div>


            <ul class="list">
                <li class="item">
                    <div class="left">身份证</div>
                    <div class="right" style="visibility: hidden;">√</div>
                </li>
                <li class="item">
                    <div class="left">护照</div>
                    <div class="right" style="visibility: hidden;">√</div>
                </li>
                <li class="item">
                    <div class="left">票号</div>
                    <div class="right" style="visibility: hidden;">√</div>
                </li>
            </ul>
        </div>
    </div>
    <div class="out" style="visibility: hidden;">
        <div class="posi">
        </div>
        <div class="fixed-three">
            <div class="head">
                <div class="lefts">取消</div>
                <div class="title">选择乘机人</div>
                <div class="rights">确定</div>
            </div>
            <div class="button">
                <button>新增乘机人</button>
            </div>
        </div>
        <div class="fixed-three fixed-four" style="display: none;">
            <div class="head">
                <div class="lefts">＜</div>
                <div class="title">选择乘机人</div>
                <ul class="form">
                    <li class="item">
                        <div class="left">
                            乘客姓名
                        </div>
                        <div class="right clear">
                            <input type="text" placeholder="请填写乘客姓名">
                        </div>
                    </li>
                    <li class="item">
                        <div class="left">
                            证件类型
                        </div>
                        <div class="right clear">
                            <div class="inputs">
                                <input id="id1" type="radio" name="type" checked>
                                <label for="id1">身份证</label>
                            </div>
                            <div class="inputs">
                                <input id="id2" type="radio" name="type">
                                <label for="id2">护照</label>
                            </div>
                        </div>
                    </li>
                    <li class="item">
                        <div class="left">
                            证件号码
                        </div>
                        <div class="right clear">
                            <input type="text" placeholder="请填写证件号码">
                        </div>
                    </li>

                </ul>
                <div class="submit">
                    <button class="">保存</button>
                </div>
            </div>
        </div>
    </div>
    <script>
        var btn = document.querySelector('.fixed-three .button')
        var fixOne = document.querySelector('.fixed-one')
        var fixTwo = document.querySelector('.fixed-two')
        var fixThree = document.querySelector('.fixed-three')
        var fixFour = document.querySelector('.fixed-four')
        var right = document.querySelectorAll('.form .mantle')
        var form = document.querySelectorAll('.form .item')
        var formRight = document.querySelectorAll('.fixed-two .item .right')
        var tag = document.querySelectorAll('.tags')
        var body = document.querySelector('body')
        var title = document.querySelector('.artical .title')
        var out = document.querySelectorAll('.out')
        var list = document.querySelector('.fixed-one .list')
        var idcard = document.querySelectorAll('.fixed-two .list .item')
        var btns = document.querySelector('.artical .right .btns')
        var lefts = document.querySelectorAll('.lefts')
        console.log(lefts)
        var formInput = document.querySelectorAll('.fixed-four input')
        var colors = document.querySelector('.submit button')
        var back = document.querySelector('.app .header .left')
        back.onclick = () => {
            window.history.go(-1)
        }

        fetch('https://m.ctrip.com/restapi/soa2/14508/fltCanCheckInAirlinesSearch?_fxpcqlniredt=09031093310416028615&x-traceID=09031093310416028615-1660631830704-709732').then(res => {
            return res.json()
        }).then(res1 => {
            var temp = []
            for (let i = 0; i < res1.airlinePolicyList.length; i++) {
                if (res1.airlinePolicyList[i].opType == 1) {
                    list.innerHTML += `
                <li class="item">
                    <div class="left">
                       ${res1.airlinePolicyList[i].airlineName}
                    </div>
                    <div class="right">
                        前往官网值机
                    </div>
                </li>
                `
                } else {
                    temp.push(res1.airlinePolicyList[i])
                }

            }
            list.innerHTML += `
                <li class="hint">以下航司因航司系统原因暂时不能提供服务</li>
                `
            for (let i = 0; i < temp.length; i++) {

                list.innerHTML += `
                <li class="item">
                    <div class="left gray">
                       ${res1.airlinePolicyList[i].airlineName}
                    </div>
                </li>
                `
            }
            fixOneList = document.querySelectorAll('.fixed-one .list li')
            fixOneList.forEach((val, index) => {
                val.onclick = () => {
                    form[0].lastElementChild.firstElementChild.style.color = '#333'
                    form[0].lastElementChild.firstElementChild.innerHTML = val.firstElementChild.innerHTML
                    out[0].style.visibility = 'hidden'
                    fixOne.classList.remove('show')
                }
            })
        }).catch(err => {
            console.log(err)
        })

        btns.onclick = () => {
            fixThree.classList.add('show')
            out[2].style.visibility = 'visible'
            fixThree.style.visibility = 'visible'
        }
        lefts[0].onclick = () => {
            fixThree.classList.remove('show')
            out[2].style.visibility = 'hidden'
            fixThree.style.visibility = 'hidden'
        }
        lefts[1].onclick = () => {
            fixThree.style.visibility = 'visible'
            fixFour.style.display = 'none'
            fixFour.style.bottom = '-40%'
        }
        btn.onclick = () => {
            fixThree.style.visibility = 'hidden'
            fixFour.style.display = 'block'
            fixFour.style.bottom = '0'
        }
        formInput.forEach((val) => {
            val.oninput = () => {
                if (formInput[0].value && formInput[3].value) {
                    colors.classList.add('colors')
                } else {
                    colors.classList.remove('colors')
                }
            }
        })



        right.forEach((val) => {
            val.onclick = (e) => {
                if (e.target.className == 'right mantle one' || e.target.className == 'mantle-one') {
                    fixOne.classList.add('show')
                    out[0].style.visibility = 'visible'
                }
                if (e.target.className == 'right mantle two' || e.target.className == 'mantle-two') {
                    fixTwo.classList.add('show')
                    out[1].style.visibility = 'visible'
                }
            }
        })

        tag.forEach((val) => {
            val.onclick = () => {
                fixOne.classList.remove('show')
                fixTwo.classList.remove('show')
                out[0].style.visibility = 'hidden'
                out[1].style.visibility = 'hidden'
            }
        })

        idcard.forEach((val, index) => {
            val.onclick = () => {
                idcard.forEach((t, j) => {
                    t.classList.remove('color')
                    formRight[j].style.visibility = 'hidden'
                })
                val.classList.add('color')
                formRight[index].style.visibility = 'visible'
                form[2].lastElementChild.firstElementChild.style.color = '#333'
                form[2].lastElementChild.firstElementChild.innerHTML = val.firstElementChild.innerHTML
                out[1].style.visibility = 'hidden'
                fixTwo.classList.remove('show')
            }
        })

        !(function (x) {
            function w() {
                var s = x.document,
                    r = s.documentElement,
                    a = r.getBoundingClientRect().width;
                var ratio = (85 * 750) / 640;
                if (a >= 640) {
                    r.style.fontSize = '100px';
                } else {
                    if (a <= 320) {
                        r.style.fontSize = '50px';
                    } else {
                        r.style.fontSize = (a * ratio) / 750 + 'px';
                    }
                }
            }
            x.addEventListener('resize', function () {
                w();
            });
            w();
        })(window);







    </script>
</body>

</html>